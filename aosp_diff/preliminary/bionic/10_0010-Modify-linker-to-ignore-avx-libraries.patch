From 1df540d2bfb2be74135e189ce272b2272fd731bb Mon Sep 17 00:00:00 2001
From: ahs <amrita.h.s@intel.com>
Date: Mon, 8 Mar 2021 15:16:25 +0530
Subject: [PATCH] Modify linker to ignore avx libraries

Tracked-On:
Signed-off-by: ahs <amrita.h.s@intel.com>
---
 linker/Android.bp       | 2 +-
 linker/linker_utils.cpp | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/linker/Android.bp b/linker/Android.bp
index f75088d60..62345bd40 100644
--- a/linker/Android.bp
+++ b/linker/Android.bp
@@ -315,7 +315,7 @@ cc_binary {
         "linux_bionic_supported",
         "linker_version_script_overlay",
     ],
-
+    cflags: ["-Wno-unused-parameter", "-Wno-unused-variable"],
     srcs: [
         "linker_translate_path.cpp",
     ],
diff --git a/linker/linker_utils.cpp b/linker/linker_utils.cpp
index 5e43d1526..7dcdaf1c3 100644
--- a/linker/linker_utils.cpp
+++ b/linker/linker_utils.cpp
@@ -262,12 +262,12 @@ bool is_first_stage_init() {
 }
 
 bool PlatformSupportsISAFeature(const char* isa_feature) {
-  if (strcmp(isa_feature, "avx2") == 0) {
+  /*if (strcmp(isa_feature, "avx2") == 0) {
     if (kPlatformSupportsAvx2 == -1) {
       __builtin_cpu_init();
       kPlatformSupportsAvx2 = __builtin_cpu_supports("avx2") ? 1 : 0;
     }
     return kPlatformSupportsAvx2;
-  }
+  }*/
   return false;
 }
-- 
2.17.1

